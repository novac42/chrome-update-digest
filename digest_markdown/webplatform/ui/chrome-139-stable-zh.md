---
layout: default
title: Chrome 139 UI 更新摘要
---

````markdown
保存至: digest_markdown/webplatform/ui/chrome-139-stable-zh.md

---

# Chrome 139 UI 更新摘要

## 1. 执行摘要

Chrome 139 带来了两项重要的 UI 相关 CSS 增强：对 `var()` 和 `attr()` 函数的短路处理，以及通过新 CSS 属性实现的高级圆角造型。这些更新提升了 UI 样式的健壮性和表现力，使设计更具创意和性能，同时降低了 CSS 自定义属性中循环依赖问题的风险。

## 2. 主要影响

### 技术影响

- **现有实现**：`var()` 和 `attr()` 的短路行为减少了不必要的循环检查，有望提升样式表评估的性能和可靠性。
- **新能力**：新的圆角造型属性（`corner-shape`、`superellipse`、`squircle`）允许设计师和开发者创建更复杂且更具视觉吸引力的 UI 元素，包括 squircle、缺口以及圆角形状间的动画过渡。
- **技术债务**：依赖高级圆角造型或复杂 CSS 变量回退方案的团队，现在可以简化代码库。

## 3. 风险评估

**关键风险**：
- 这些功能未发现破坏性更改。
- 这些 UI/CSS 更新未直接引入安全相关考量。

**中等风险**：
- **弃用**：目前未宣布，但团队应关注未来 CSS 自定义属性处理的变更。
- **性能影响**：`var()` 和 `attr()` 的短路可能会略微改变性能特性；团队应验证关键渲染管线。

## 4. 推荐措施

### 立即行动

- 审查并测试现有使用 `var()` 和 `attr()` 的 CSS，确保与新短路行为兼容。
- 尝试新圆角造型属性，评估其在当前和未来 UI 设计中的适用性。

### 短期规划

- 重构自定义圆角造型的替代方案，利用原生 CSS 属性。
- 更新设计系统和组件库，开放新圆角造型能力。

### 长期策略

- 关注 CSSWG 和 ChromeStatus，了解 CSS 自定义属性和 UI 表现力的进一步增强。
- 随着浏览器支持的成熟，规划更广泛采用高级 CSS 特性。

## 5. 功能分析

### Short-circuiting `var()` and `attr()`（短路处理）

**影响级别**：🟡 重要

**变更内容**：
当未采用回退时，`var()` 和 `attr()` 函数现在会在不检查回退循环的情况下进行评估。这优化了 CSS 自定义属性和属性的评估流程。

**意义**：
此更改减少了不必要的计算和误报循环检测的风险，使 CSS 变量的使用更可预测且性能更佳。同时简化了复杂样式表的调试和维护。

**实施建议**：
- 检查现有 CSS 是否依赖回退循环，确保无意外副作用。
- 测试关键 UI 路径，关注渲染或变量解析的变化。
- 更新文档，反映新的评估行为。

**参考资料**：
- [ChromeStatus.com entry](https://chromestatus.com/feature/6212939656462336)

---

### Corner shaping (`corner-shape`, `superellipse`, `squircle`)（圆角造型）

**影响级别**：🔴 关键

**变更内容**：
Chrome 现已通过新 CSS 属性支持高级圆角造型，开发者可将圆角指定为 superellipse 形状。这使得创建如 squircle、缺口、凹槽等形状成为可能，并支持这些形状间的动画过渡。

**意义**：
该功能带来更高的设计灵活性，无需依赖 SVG 或复杂的 clip-path 即可实现现代、独特的 UI 元素。同时简化了圆角元素的动画和主题处理，使 Web 能力与原生应用设计趋势接轨。

**实施建议**：
- 用原生 CSS 属性替换自定义 SVG 或 clip-path 的高级圆角方案。
- 更新设计 token 和组件 API，支持新圆角形状。
- 测试圆角形状间的动画和过渡，关注流畅性与性能。
- 与设计团队协作，探索这些属性带来的新 UI 可能性。

**参考资料**：
- [Tracking bug #393145930](https://issues.chromium.org/issues/393145930)
- [ChromeStatus.com entry](https://chromestatus.com/feature/5357329815699456)
- [Spec](https://drafts.csswg.org/css-borders-4/#corner-shaping)

---
````