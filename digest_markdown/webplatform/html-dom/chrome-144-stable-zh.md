# Chrome 144 Stable - HTML/DOM 更新

## 领域摘要

Chrome 144 通过新的 `<geolocation>` 元素在权限处理方面引入了重大进展,标志着向声明式、用户激活的敏感能力控制的转变。此功能解决了长期存在的用户体验问题,即 JavaScript 触发的权限提示缺乏明确的用户意图信号。通过提供用户明确交互的浏览器控制元素,Chrome 144 实现了更好的权限提示体验,并为先前拒绝的权限提供了恢复路径。此更新代表了实验性 `<permission>` 元素向特定能力实现的演进,基于来自 Web 社区和浏览器供应商的反馈,提供了更强大和量身定制的开发者体验。

## 详细更新

Chrome 144 中的 html-dom 领域专注于改进敏感 Web 能力的声明式控制模型,特别是针对地理位置权限流程。

### The `<geolocation>` element

#### 新增内容

Chrome 144 引入了 `<geolocation>` 元素,这是一个声明式 HTML 控件,允许用户通过浏览器控制的 UI 元素明确授予地理位置访问权限。此元素自动处理权限流程,并直接向站点提供位置数据,通常无需单独的 JavaScript API 调用。

#### 技术细节

`<geolocation>` 元素作为浏览器控制的组件直接嵌入到页面中。当用户点击该元素时,他们的交互提供了明确的、有意的同意信号,从而在更好的上下文中触发权限提示。这种方法从根本上改变了地理位置权限的请求方式,从 JavaScript 发起的提示转变为用户发起的声明式控件。

该元素从之前在起源试验中测试的更通用的 `<permission>` 元素演进而来。基于开发者反馈和其他浏览器供应商的意见,实现被改进为这个特定能力版本,以提供更量身定制的体验。

#### 适用场景

此功能特别适用于以下场景:
- 站点需要以明确的用户意图请求地理位置访问
- 用户先前拒绝了地理位置权限并需要恢复路径
- 开发者希望避免 JavaScript 触发的权限提示带来的负面用户体验
- 应用程序需要标准化的、浏览器原生的位置访问控件

声明式方法通过将权限请求变为明确的用户操作而非潜在意外的 JavaScript 提示,从而提高了信任和透明度。

#### 参考资料

- [跟踪错误 #435351699](https://issues.chromium.org/issues/435351699)
- [ChromeStatus.com 条目](https://chromestatus.com/feature/5125006551416832)
- [规范](https://wicg.github.io/PEPC/permission-elements.html)
